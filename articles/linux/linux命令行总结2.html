<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第二章  配置环境和shell环境 | 个人博客</title>
    <meta name="description" content="个人博客">
    
    
    <link rel="preload" href="/assets/css/0.styles.2e1cc020.css" as="style"><link rel="preload" href="/assets/js/app.c1d9b9ee.js" as="script"><link rel="preload" href="/assets/js/2.c7d58fa6.js" as="script"><link rel="preload" href="/assets/js/19.3d0a85ef.js" as="script"><link rel="prefetch" href="/assets/js/10.d2e0cdc1.js"><link rel="prefetch" href="/assets/js/11.c6e284ec.js"><link rel="prefetch" href="/assets/js/12.10f858de.js"><link rel="prefetch" href="/assets/js/13.63697008.js"><link rel="prefetch" href="/assets/js/14.d627be9d.js"><link rel="prefetch" href="/assets/js/15.8420db77.js"><link rel="prefetch" href="/assets/js/16.1e32a0b5.js"><link rel="prefetch" href="/assets/js/17.e1c52886.js"><link rel="prefetch" href="/assets/js/18.5e04705e.js"><link rel="prefetch" href="/assets/js/20.935b98b6.js"><link rel="prefetch" href="/assets/js/21.f847dee8.js"><link rel="prefetch" href="/assets/js/22.b93d7d44.js"><link rel="prefetch" href="/assets/js/23.0ac45a76.js"><link rel="prefetch" href="/assets/js/24.2f6173f8.js"><link rel="prefetch" href="/assets/js/25.1fd72739.js"><link rel="prefetch" href="/assets/js/26.80fe1215.js"><link rel="prefetch" href="/assets/js/27.5d5e7e97.js"><link rel="prefetch" href="/assets/js/28.059a6745.js"><link rel="prefetch" href="/assets/js/29.e46235d3.js"><link rel="prefetch" href="/assets/js/3.11f40a5b.js"><link rel="prefetch" href="/assets/js/30.3878cbe1.js"><link rel="prefetch" href="/assets/js/31.1e9e6434.js"><link rel="prefetch" href="/assets/js/32.c1b900dc.js"><link rel="prefetch" href="/assets/js/33.8096500a.js"><link rel="prefetch" href="/assets/js/34.fa28a796.js"><link rel="prefetch" href="/assets/js/35.b67c3d40.js"><link rel="prefetch" href="/assets/js/36.756057ed.js"><link rel="prefetch" href="/assets/js/37.b54b948b.js"><link rel="prefetch" href="/assets/js/4.0ffe1fef.js"><link rel="prefetch" href="/assets/js/5.da69e183.js"><link rel="prefetch" href="/assets/js/6.887370ca.js"><link rel="prefetch" href="/assets/js/7.7ad7bd37.js"><link rel="prefetch" href="/assets/js/8.b4bc0ca8.js"><link rel="prefetch" href="/assets/js/9.ac008f1b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2e1cc020.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/articles/其他/personal.html" class="nav-link">简历</a></div><div class="nav-item"><a href="https://juejin.im/user/5bd074165188251ce71d8e2c" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/tangjie-93/tangjie-93.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/articles/其他/personal.html" class="nav-link">简历</a></div><div class="nav-item"><a href="https://juejin.im/user/5bd074165188251ce71d8e2c" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/tangjie-93/tangjie-93.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>linux</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/linux/linux命令行总结1.html" class="sidebar-link">linux命令行总结1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结1.html#第一章-走进shell的世界" class="sidebar-link">第一章 走进shell的世界</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结1.html#_1、什么是shell？" class="sidebar-link">1、什么是shell？</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结1.html#_2、文件系统的操作" class="sidebar-link">2、文件系统的操作</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结1.html#_3、常见基本命令" class="sidebar-link">3、常见基本命令</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结1.html#_4、重定向" class="sidebar-link">4、重定向</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结1.html#_5、echo操作符" class="sidebar-link">5、echo操作符</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结1.html#_6、键盘高级操作技巧" class="sidebar-link">6、键盘高级操作技巧</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结1.html#_7、权限" class="sidebar-link">7、权限</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结1.html#_8、进程" class="sidebar-link">8、进程</a></li></ul></li></ul></li><li><a href="/articles/linux/linux命令行总结2.html" class="active sidebar-link">linux命令行总结2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#第二章-配置环境和shell环境" class="sidebar-link">第二章  配置环境和shell环境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#_1、shell环境" class="sidebar-link">1、shell环境</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#_2、vi编辑器" class="sidebar-link">2、vi编辑器</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#_3、自定制shell提示符" class="sidebar-link">3、自定制shell提示符</a></li></ul></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#第三章-常见任务和基本工具" class="sidebar-link">第三章  常见任务和基本工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#_1、软件包管理" class="sidebar-link">1、软件包管理</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#_2、网络系统" class="sidebar-link">2、网络系统</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#_3、查找文件" class="sidebar-link">3、查找文件</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#_4、归档和备份" class="sidebar-link">4、归档和备份</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#_5、文本处理" class="sidebar-link">5、文本处理</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#_6、格式化输出" class="sidebar-link">6、格式化输出</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结2.html#_7、编译程序" class="sidebar-link">7、编译程序</a></li></ul></li></ul></li><li><a href="/articles/linux/linux命令行总结3.html" class="sidebar-link">linux命令行总结3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#第4章-编写shell脚本" class="sidebar-link">第4章 编写shell脚本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_1、什么是shell脚本？" class="sidebar-link">1、什么是shell脚本？</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_2、启动一个项目" class="sidebar-link">2、启动一个项目</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_3、自顶向下设计" class="sidebar-link">3、自顶向下设计</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_4、流程控制——if分支语句" class="sidebar-link">4、流程控制——if分支语句</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_5、读取键盘输入" class="sidebar-link">5、读取键盘输入</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_6、流程控制——while-until循环" class="sidebar-link">6、流程控制——while/until循环</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_7、调试技巧" class="sidebar-link">7、调试技巧</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_8、流程控制——case分支" class="sidebar-link">8、流程控制——case分支</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_9、位置参数" class="sidebar-link">9、位置参数</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_10、流程控制——for循环" class="sidebar-link">10、流程控制——for循环</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_11、字符串和数字" class="sidebar-link">11、字符串和数字</a></li><li class="sidebar-sub-header"><a href="/articles/linux/linux命令行总结3.html#_12、数组" class="sidebar-link">12、数组</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="第二章-配置环境和shell环境"><a href="#第二章-配置环境和shell环境" class="header-anchor">#</a> 第二章  配置环境和shell环境</h2> <p>​		<code>shell</code>在环境中存储了两种基本类型的数据——<strong>环境变量和<code>shell</code>变量</strong>。<code>shell</code>变量是<code>bash</code>存放的少量数据，剩下的基本都是环境变量。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>• printenv <span class="token operator">-</span> 打印部分或所有的环境变量
• <span class="token keyword">set</span> <span class="token operator">-</span> 设置 shell 选项
• <span class="token keyword">export</span> — 导出环境变量，让随后执行的程序知道。
• alias <span class="token operator">-</span> 创建命令别名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_1、shell环境"><a href="#_1、shell环境" class="header-anchor">#</a> 1、shell环境</h3> <p><strong>1、环境变量</strong></p> <p>​		如果 shell 环境中的一个成员既不可用 set 命令也不可用 printenv 命令显示，则这个变量是别名。 输入不带参数的 alias 命令来查看它们:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>printenv <span class="token constant">USER</span> <span class="token comment">//打印特定变量的数值</span>
echo $<span class="token constant">USER</span> <span class="token comment">//打印特定用户的数值</span>
<span class="token keyword">set</span> <span class="token operator">|</span> less <span class="token comment">//输出结果按照字母顺序排列：</span>
alas <span class="token comment">//显示所有的别名</span>
foo<span class="token operator">=</span><span class="token string">'this is a test'</span><span class="token comment">//添加环境变量</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>2、如何建立shell环境</strong></p> <p>​		当我们登录系统后，启动 bash 程序，并且会读取一系列称为<strong>启动文件</strong>的配置脚本， 这些文件定义了默认的可供所有用户共享的 shell 环境。精确的启动顺序依赖于要运行的 shell 会话 类型。有两种 shell 会话类型：一个是<strong>登录 shell 会话</strong>，另一个是<strong>非登录 shell 会话</strong>。</p> <p>非登录<code>shell</code>用户会读取一下文件。</p> <table><thead><tr><th>文件</th> <th>内容</th></tr></thead> <tbody><tr><td>/etc/bash.bashrc</td> <td>应用于所有用户的全局配置文件。</td></tr> <tr><td>~/.bashrc</td> <td>用户私有的启动文件。可以用来扩展或重写全局配置脚本中的设置。</td></tr></tbody></table> <p>登录shell会话的启动文件。</p> <table><thead><tr><th>文件</th> <th>内容</th></tr></thead> <tbody><tr><td>/etc/profile</td> <td>应用于所有用户的全局配置脚本。</td></tr> <tr><td>~/.bash_profile</td> <td>用户私人的启动文件。可以用来扩展或重写全局配置脚本中的设置。</td></tr> <tr><td>~/.bash_login</td> <td>如果文件 ~/.bash_profile 没有找到，bash 会尝试读取这个脚本。</td></tr> <tr><td>~/.profile</td> <td>如果文件 ~/.bash_profile 或文件 ~/.bash_login 都没有找到，bash 会试图读取 这个文件。 这是基于 Debian 发行版的默认设置，比方说 Ubuntu。</td></tr></tbody></table> <p>​		PATH 变量经常（但不总是，依赖于发行版）在 /etc/profile 启动文件中设置，修改PATH变量，添加目录到PATH目录列表的末尾。</p> <p><strong>3、激活我们的修改</strong></p> <p>​		我们对于文件<code>.bashrc</code>的修改不会生效，直到我们关闭终端会话，再重新启动一个新的会话， 因为 <code>.bashrc</code>文件只是在<strong>刚开始启动终端会话时读取</strong>。但是通过 <code>source .bashrc</code>可以强迫<code>bash</code>重新读取修改过的文件。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>vi <span class="token punctuation">.</span>bashrc <span class="token comment">//使用文编编辑器编辑文件</span>
source <span class="token punctuation">.</span>bashrc <span class="token comment">//bash重新读取编辑过的文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2、vi编辑器"><a href="#_2、vi编辑器" class="header-anchor">#</a> 2、vi编辑器</h3> <p>​		使用<code>vi</code>编辑器的理由。</p> <ul><li><p>vi编辑器很多系统都预装了。</p></li> <li><p>vi是轻量级且执行速度很快的编辑器。</p> <p>vim（vi improved）是“vi”的一款高级替代版本。vim通常是linux系统“vi”的符号链接(别名)。</p></li></ul> <p><strong>1、停止和启动vi</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>vi file<span class="token comment">//启动vi</span>
<span class="token operator">:</span>q <span class="token comment">//退出vi</span>
<span class="token operator">:</span>q<span class="token operator">!</span> <span class="token comment">//修改了文件，强制不保存退出</span>
<span class="token operator">:</span>wq <span class="token comment">//修改了文件，保存退出</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>2、移动光标</strong></p> <table><thead><tr><th>按键</th> <th>移动光标</th></tr></thead> <tbody><tr><td>l or 右箭头</td> <td>向右移动一个字符</td></tr> <tr><td>h or 左箭头</td> <td>向左移动一个字符</td></tr> <tr><td>j or 下箭头</td> <td>向下移动一行</td></tr> <tr><td>k or 上箭头</td> <td>向上移动一行</td></tr> <tr><td>0 (零按键)</td> <td>移动到当前行的行首。</td></tr> <tr><td>^</td> <td>移动到当前行的第一个非空字符。</td></tr> <tr><td>$</td> <td>移动到当前行的末尾。</td></tr> <tr><td>w</td> <td>移动到下一个单词或标点符号的开头。</td></tr> <tr><td>W</td> <td>移动到下一个单词的开头，忽略标点符号。</td></tr> <tr><td>b</td> <td>移动到上一个单词或标点符号的开头。</td></tr> <tr><td>B</td> <td>移动到上一个单词的开头，忽略标点符号。</td></tr> <tr><td>Ctrl-f or Page Down</td> <td>向下翻一页</td></tr> <tr><td>Ctrl-b or Page Up</td> <td>向上翻一页</td></tr> <tr><td>numberG</td> <td>移动到第 number 行。例如，1G 移动到文件的第一行。</td></tr> <tr><td>G</td> <td>移动到文件末尾。</td></tr></tbody></table> <p><strong>3、基本编辑</strong></p> <ul><li><p>基本编辑：进入<code>vi</code>编辑器时，默认是<strong>编辑模式</strong>，在键盘上按下<code>insert</code>或者<code>i</code>后进入插入模式，此时可以输入文本。按下<code>Esc</code>退出插入模式返回到<strong>命令模式</strong>。按下<code>u</code> 按键，当在命令模式下，vi 将会撤销你所做的最后一次修改。</p></li> <li><p>追加文本：vi 提供了<strong>追加文本</strong>的命令，明智地命名为&quot;a&quot;命令。 vi 提供了一种快捷方式（&quot;A&quot;命令）来移动到当前行的末尾，并且能添加文本。</p></li> <li><p>打开一行。这会在存在的两行之间插入一个空白行，并且进入插入模式。 把光标移动到某一行上，按下<code>o</code>，在当前行的下方打开一行，按下<code>O</code>，在当前行的上方打开一行。</p></li> <li><p>删除文本：</p> <table><thead><tr><th>命令</th> <th>删除的文本</th></tr></thead> <tbody><tr><td>x</td> <td>当前字符</td></tr> <tr><td>3x</td> <td>当前字符集其后的两个字符</td></tr> <tr><td>dd</td> <td>当前行</td></tr> <tr><td>5dd</td> <td>当前行及随后的四行文本</td></tr> <tr><td>dW</td> <td>从光标位置开始到下一个单词的开头</td></tr> <tr><td>d$</td> <td>从光标位置开始到当前行的行尾</td></tr> <tr><td>d0</td> <td>从光标位置开始到当前行的行首</td></tr> <tr><td>d^</td> <td>从光标位置开始到文本行的第一个非空字符</td></tr> <tr><td>dG</td> <td>从当前行到文件的末尾</td></tr> <tr><td>d20G</td> <td>从当前行到文件的第20行。</td></tr></tbody></table></li> <li><p>剪切、复制和粘贴文本：使用 d 命令，删除的部分被复制到一个 粘贴缓冲区中（看作剪切板）。过后我们执行<strong>小 p命令把剪切板中的文本粘贴到光标位置之后， 或者是大 P 命令把文本粘贴到光标之前。y 命令来“拉”（复制）文本，和 d 命令剪切文本的方式差不多。</strong></p></li> <li><p>链接行：大写的 J把行与行之间连接起来。</p></li> <li><p>查找和替换：<strong>f命令查找一行</strong>。例如，命令 fa 会把光标定位到同一行中 下一个出现的&quot;a&quot;字
符上。在一行中执行了字符的查找命令之后，通过输入分号来重复这个查找。<code>/</code>用于查找整个文件。当你输
入/命令后，一个&quot;/&quot;字符会出现在屏幕底部。下一步，输入要查找的单词或短语后， 按下回车。光标就会移动到下一个包含所查找字符串的位置。通过 <code>n</code>命令来重复先前的查找。</p></li> <li><p>全局查找和替换：vi 使用 ex 命令来执行查找和替代操作。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">:</span><span class="token operator">%</span>s<span class="token operator">/</span>Line<span class="token operator">/</span>line<span class="token operator">/</span>g <span class="token comment">//全局将Line替换为line</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>条目</th> <th>含义</th></tr></thead> <tbody><tr><td>：</td> <td>运行一个<code>ex</code>命令</td></tr> <tr><td>%</td> <td>指定要操作的行数。% 是一个快捷方式，表示从第一行到最后一行。另外，操作范 围也 可以用 1,5 来代替（因为我们的文件只有5行文本），或者用 1,$ 来代替，意 思是 “ 从第一行到文件的最后一行。” 如果省略了文本行的范围，那么操作只对 当前行生效。</td></tr> <tr><td>s</td> <td>指定操作。在这种情况下是，替换（查找与替代）。</td></tr> <tr><td>/Line/line</td> <td>查找类型与替代文本。</td></tr> <tr><td>g</td> <td>这是“全局”的意思，意味着对文本行中所有匹配的字符串执行查找和替换操 作。如果省略 g，则 只替换每个文本行中第一个匹配的字符串。</td></tr></tbody></table> <div class="language- line-numbers-mode"><pre class="language-text"><code>:%s/Line/line/gc //全局将Line替换为line,并会出来提示框。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>按键</th> <th>行为</th></tr></thead> <tbody><tr><td>y</td> <td>执行替换操作</td></tr> <tr><td>n</td> <td>跳过这个匹配的实例</td></tr> <tr><td>a</td> <td>对这个及随后所有匹配的字符串执行替换操作。</td></tr> <tr><td>q or esc</td> <td>退出替换操作。</td></tr> <tr><td>l</td> <td>执行这次替换并退出。l 是 “last” 的简写。</td></tr> <tr><td>Ctrl-e, Ctrl-y</td> <td>分别是向下滚动和向上滚动。用于查看建议替换的上下文。</td></tr></tbody></table></li> <li><p>编辑多个文件 <code>vi file1 file2...</code></p></li> <li><p>文件之间转换。<code>:n</code>从这个文件转到下一个文件。在切换这些命令的时候可能需要执行<code>:w 1.txt</code>来先保存编辑的文件，然后再切换。 <code>:N</code>回到先前的文件。我们可以查看正在编辑的文件列表，使用<code>:buffers</code> 命令。运行这个 命令后，屏幕顶部就会显示出一个文件列表。这时要使用:buffer 命令， 其后加上缓冲区号码，来转换文件。</p></li> <li><p>从一个文件复制内容到另一个文件。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>:buffer 1//转到缓冲区编号为1的文件 通过`yy`等命令来复制内容。
:buffer 2//转到编号为的文件，将粘贴区的文件进行复制。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>插入整个文件到另一个文件。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">:</span>r foo<span class="token punctuation">.</span>txt <span class="token comment">//把指定的文件插入到光标位置之前</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>保存工作</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">:</span>wq <span class="token comment">//保存退出</span>
<span class="token operator">:</span>w <span class="token number">1.</span>txt<span class="token comment">//保存特定的文件，如果1.txt不存在，会将正在编辑的文件另存为1.txt</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <h3 id="_3、自定制shell提示符"><a href="#_3、自定制shell提示符" class="header-anchor">#</a> 3、自定制shell提示符</h3> <p><strong>1、解剖一个提示符</strong></p> <p>默认提示符：包含了用户名、主机名和当前工作目录。提示符是由<code>PS1(prompt string one)</code>的环境变量定义的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span>root@iZwtrtjgg3qrk8Z <span class="token operator">~</span><span class="token punctuation">]</span>#
echo <span class="token constant">PS1</span> <span class="token comment">//[\u@\h \W]\$</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>提示符中用到的转义字符。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">\</span>a		以ASCII格式编码的铃声，当遇到这个转义序列时，计算机会发出嗡嗡的响声。
<span class="token punctuation">\</span>d      以日、月、天格式俩表示当前日期
<span class="token punctuation">\</span>h		本地机器的主机名，不带末尾的域名
<span class="token punctuation">\</span>H		完整的主机名
<span class="token punctuation">\</span>j		运行在当前shell会话中的工作数
<span class="token punctuation">\</span>l		当前终端设备名
<span class="token punctuation">\</span>n		换行符
<span class="token punctuation">\</span>r		回车符
<span class="token punctuation">\</span>s		shell程序名
<span class="token punctuation">\</span>t		以24小时制，<span class="token string">'hours:minutes:seconds'</span>的格式表示当前时间
<span class="token punctuation">\</span>T		以12小时制表示当前时间
<span class="token punctuation">\</span>@		以12小时工作制，AP/PM表示当前时间
<span class="token punctuation">\</span>A		以24小时工作制，hours:minutes格式表示当前时间
<span class="token punctuation">\</span>u		当前用户名
<span class="token punctuation">\</span>v		shell程序的版本号
<span class="token punctuation">\</span>V		Version and release numbers of the shell
<span class="token punctuation">\</span>w		当前工作目录名
<span class="token punctuation">\</span>W		当前功能工作目录的最后部分。
<span class="token punctuation">\</span><span class="token operator">!</span>		当前命令的历史号
<span class="token punctuation">\</span>#		当前会话中的命令数
<span class="token punctuation">\</span>$		表示$字符，超级管理员显示<span class="token comment">#字符</span>
<span class="token punctuation">\</span><span class="token punctuation">[</span>		标志着一系列或多个非打印字符的开始
<span class="token punctuation">\</span><span class="token punctuation">]</span>		标志着非打印字符的技术。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>2、自定义提示符</strong></p> <p>​		可以用一个变量将当前提示符存起来，也可以在某个文件定义该提示符，然后导出，使之提示符永久存在。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span>、用一个变量将当前提示符保存起来；
ps1_old<span class="token operator">=</span>$<span class="token constant">PS1</span><span class="token punctuation">;</span>
<span class="token number">2</span>、自定义提示符
<span class="token constant">PS1</span><span class="token operator">=</span><span class="token string">&quot;\a\h&quot;</span>。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr> <h2 id="第三章-常见任务和基本工具"><a href="#第三章-常见任务和基本工具" class="header-anchor">#</a> 第三章  常见任务和基本工具</h2> <h3 id="_1、软件包管理"><a href="#_1、软件包管理" class="header-anchor">#</a> 1、软件包管理</h3> <p>​		指的是系统中一种安装和维护软件的方法。两大包管理技术阵营——Debian的&quot;.deb&quot;和红帽的“.rpm”。</p> <p>​		<strong>包文件：<strong>在包管理系统中软件的基本单元是</strong>包文件</strong>。包文件是一个构成软件包的文件压缩集合。一个软件包 可能由大量程序以及支持这些程序的数据文件组成。。除了安装文件之外，软件包文件也包括 关于这个包的元数据，如软件包及其内容的文本说明。另外，许多软件包还包括预安装和安装后脚本， 这些脚本用来在软件安装之前和之后执行配置任务。</p> <p>​		<strong>资源库：</strong> 在软件开发不同周期内存放不同性质（测试、开发）的软件包的库。</p> <p><strong>1、上层和底层软件包工具</strong></p> <p>​		软件包管理系统通常由两种工具类型组成：底层工具用来处理这些任务，比方说安装和删除软件包文件， 和上层工具，完成元数据搜索和依赖解析。&quot;package_name&quot; 这个术语是指软件包实际名称，而不是指&quot;package_file&quot;，它是包含在软件包中的文件名。</p> <table><thead><tr><th>发行版</th> <th>底层工具</th> <th>上层工具</th></tr></thead> <tbody><tr><td>Debian-Style</td> <td>dpkg</td> <td>apt-get,aptitude</td></tr> <tr><td>Fedora,Red Hat Enterprise Linux,Centos</td> <td>rpm</td> <td>yum</td></tr></tbody></table> <p><strong>2、查找资源库中的软件包</strong></p> <table><thead><tr><th>风格</th> <th>命令</th></tr></thead> <tbody><tr><td>Debian</td> <td>apt-get update；apt-cache search search_string</td></tr> <tr><td>Red Hat</td> <td>yum search search_string</td></tr></tbody></table> <p><strong>2、从资源库中安装一个软件包、卸载软件、更新软件</strong></p> <table><thead><tr><th>功能</th> <th>Debian</th> <th>Red Hat</th></tr></thead> <tbody><tr><td>安装</td> <td>apt-get update;apt-get install package_name</td> <td>yum install package_name</td></tr> <tr><td>卸载</td> <td>apt-get remove package_name</td> <td>yum erase package_name</td></tr> <tr><td>更新</td> <td>apt-get update；apt-get upgrade</td> <td>yum update</td></tr> <tr><td>显示所安转软件包的信息</td> <td>apt-cache show package_name</td> <td>yum info package_name</td></tr></tbody></table> <p><strong>3、通过软件包文件来安装软件、经过软件包文件来升级软件</strong></p> <p>​		从某处而不是先从资源库中下载软件包文件，可以直接使用底层工具来直接安装它们。底层软件包安装命令如下所示。</p> <table><thead><tr><th>功能</th> <th>Debian</th> <th>Red Hat</th></tr></thead> <tbody><tr><td>安装软件</td> <td>dpkg --install package_file</td> <td>rpm -i package_file</td></tr> <tr><td>更新软件</td> <td>dpkg --install package_file</td> <td>rpm -U package_file</td></tr> <tr><td>确认是否安装了软件包</td> <td>dpkg --status package_name</td> <td>rpm -q package_name</td></tr> <tr><td>确定安装了那个文件的软件包</td> <td>dpkg --search file_name</td> <td>rpm -qf file_name</td></tr> <tr><td>查看安装了那些软件包</td> <td>dpkg --list</td> <td>rpm -qa</td></tr></tbody></table> <h3 id="_2、网络系统"><a href="#_2、网络系统" class="header-anchor">#</a> 2、网络系统</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>• ping <span class="token operator">-</span> 发送 <span class="token constant">ICMP</span> <span class="token constant">ECHO_REQUEST</span> 软件包到网络主机
• netstat <span class="token operator">-</span> 打印网络连接，路由表，接口统计数据，伪装连接，和多路广播成员
• wget <span class="token operator">-</span> 非交互式网络下载器
• ssh <span class="token operator">-</span> OpenSSH <span class="token constant">SSH</span> 客户端（远程登录程序）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>1、ping</strong></p> <p>​		命令发送一个特殊的网络数据包，叫做 IMCP ECHO_REQUEST，到一台指定的主机。大多数接收这个包的网络设备将会回复它，来允许网络连接验证。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>ping 域名<span class="token operator">|</span><span class="token constant">IP</span>地址
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>2、netstat</strong></p> <p>​		该程序被用来检查各种各样的网络设置和统计数据。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>netstat <span class="token operator">-</span>ie<span class="token comment">//查看系统中的网络接口：</span>
netstat <span class="token operator">-</span>r <span class="token comment">//会显示内核的网络路由表</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>3、wget</strong></p> <p>​		wget可以从网络和FTP网站上都能下载数据。不止能下载单个文件，多个文件，甚至整个网站都能下载。wget的许多选项允许wget递归的下载，在后台下载文件（退出后仍在下载）。</p> <p><strong>4、ssh</strong></p> <p>​		ssh（Secure Shell）解决了与远端主机安全交流的问题。首先，它要验证远端主机是否为它所知道的那台主机（阻止了“中间人”的攻击）。其次，它加密了本地和远程主机之间所有的通讯信息。</p> <p>​		ssh又两部分组成。ssh服务器在远程主机上运行，在端口22上监听将要到来的链接。ssh客户端用在本地系统中，用来与远程服务器通信。</p> <p>​		当你通过 SSH 协议与远端主机建立连接的时候，其中发生的事就是在<strong>本地与远端系统之间 创建了一条加密通道</strong>。通常，这条通道被用来把在本地系统中输入的命令安全地传输到远端系统， 同样地，再把执行结果安全地发送回来。</p> <p>​		大多数 Linux 发行版自带一个提供 SSH 功能的软件包，叫做 <strong>OpenSSH</strong>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>ssh 用户名@ip地址 <span class="token comment">//使用ssh登录服务器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>5、scp</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span>、从远程系统复制文档到本地系统
scp 用户名@ip<span class="token operator">:</span>document<span class="token punctuation">.</span>txt <span class="token comment">//</span>
<span class="token number">2</span>、将文件从本地复制到linux服务器
scp 文件 用户名@ip<span class="token operator">:</span><span class="token function">文件名或者</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">,</span>表示就用本地文件名称<span class="token punctuation">)</span>
<span class="token number">3</span>、将文件夹从本地复制到linux服务器
scp <span class="token operator">-</span>r 文件夹 用户名@ip<span class="token operator">:</span><span class="token function">文件名或者</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">,</span>表示就用本地文件名称<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3、查找文件"><a href="#_3、查找文件" class="header-anchor">#</a> 3、查找文件</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>• locate – 通过名字来查找文件
• find – 在目录层次结构中搜索文件
我们也将看一个经常与文件搜索命令一起使用的命令，它用来处理搜索到的文件列表：
• xargs – 从标准输入生成和执行命令行
另外，我们将介绍两个命令来协助我们探索：
• touch – 更改文件时间
• stat – 显示文件或文件系统状态，展示系统对某个文件及其属性所知道的所有信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>1、locate-查找文件</strong></p> <p>​		 locate 程序支持基本的（--regexp 选项）和扩展的（--regex 选项）正则表达式</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>locate 文件名称<span class="token comment">// locate只能依据文件名来查找文件</span>
locate <span class="token operator">--</span>regex <span class="token string">'bin/(gz|zip)'</span> <span class="token comment">//模糊匹配bin/zip和bin/gz文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2、find-查找文件的复杂方式</strong></p> <p>​		find 程序能基于各种各样的属性， 搜索一个给定目录（以及它的子目录），来查找文件。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>find <span class="token operator">~</span><span class="token comment">//输出家目录列表</span>
find <span class="token operator">~</span> <span class="token operator">-</span>type d<span class="token comment">//只搜索目录</span>
find <span class="token operator">~</span> <span class="token operator">-</span>type f<span class="token comment">//只搜索普通文件</span>
find <span class="token operator">~</span> <span class="token operator">-</span>type f <span class="token operator">-</span>name <span class="token string">&quot;\*.jpg&quot;</span> <span class="token operator">-</span>size <span class="token operator">+</span><span class="token number">1</span>M <span class="token comment">//查找所有文件名匹配 通配符模式“*.JPG”和文件大小大于（-表示小于，没有符号意味着精确匹配）1M 的文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>​		<code>type</code>的参数有b(块设备文件)、c(字符设备文件)、d(目录)、f(普通文件)、l(符号链接)五种类型。</p> <p>​		<code>size</code>的参数有b(512个字节快，默认值)、c(字节)、w(两个字节的字)、k(1024个单位字节)、M(兆字节)、G(千兆字节)</p> <p>​		find 命令支持大量不同的测试条件。下表是列出了一些常见的测试条件。请注意，在需要数值参数的 情况下，可以应用以上讨论的“+”和&quot;-&quot;符号表示法：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>-cmin n 		匹配的文件和目录的内容或属性最后修改时间正好在 n 分钟之前。 指定少于 n 分钟 之前，使用 -					n，指定多于 n 分钟之前，使用 +n。
-cnewer <span class="token function">file</span> 	匹配的文件和目录的内容或属性最后修改时间早于那些文件。 
-ctime n 		匹配的文件和目录的内容和属性最后修改时间在 n<span class="token punctuation">\</span>*24小时之前。 
-empty 			匹配空文件和目录。 
-group name 	匹配的文件和目录属于一个组。组可以用组名或组 ID 来表示。 
-iname pattern 	就像-name 测试条件，但是不区分大小写。 
-inum n 		匹配的文件的 inode 号是 n。这对于找到某个特殊 inode 的所有硬链接很有帮助。 
-mmin n 		匹配的文件或目录的内容被修改于 n 分钟之前。 
-mtime n 		匹配的文件或目录的内容被修改于 n<span class="token punctuation">\</span>*24小时之前
-name pattern 	用指定的通配符模式匹配的文件和目录。 
-newer <span class="token function">file</span> 	匹配的文件和目录的内容早于指定的文件。当编写 shell 脚本，做文件备份时，非常有帮助。 每					次你制作一个备份，更新文件（比如说日志），然后使用 <span class="token function">find</span> 命令来 决定自从上次更新，哪					一个文件已经更改了。 
-nouser 		匹配的文件和目录不属于一个有效用户。这可以用来查找属于删除帐户的文件或监测攻击行为。 
-nogroup 		匹配的文件和目录不属于一个有效的组。 
-perm mode 		匹配的文件和目录的权限已经设置为指定的 mode。mode 可以用 八进制或符号表 示法。 
-samefile name 	相似于-inum 测试条件。匹配和文件 name 享有同样 inode 号的文件。 
-size n 		匹配的文件大小为 n。 
-type c 		匹配的文件类型是 c。 c可以是<span class="token variable"><span class="token variable">`</span>file<span class="token punctuation">(</span>文件<span class="token punctuation">)</span>、d<span class="token punctuation">(</span>目录<span class="token punctuation">)</span><span class="token variable">`</span></span>
-user name 		匹配的文件或目录属于某个用户。这个用户可以通过用户名或用户 ID 来表示。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>find文件类型</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>b		块设备文件
c		字符设备文件
d		目录
f		普通文件
l		符号链接
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>逻辑操作符</strong></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>-and		如果操作符两边的测试条件都是真，则匹配。可以简写为<span class="token variable"><span class="token variable">`</span>-a<span class="token variable">`</span></span>
-or			操作符两边的任一个测试条件为真，则匹配。可以简写为<span class="token variable"><span class="token variable">`</span>-o<span class="token variable">`</span></span>
-not		操作符后面的测试条件为真，则匹配。简写为<span class="token variable"><span class="token variable">`</span><span class="token operator">!</span><span class="token variable">`</span></span>
<span class="token punctuation">(</span><span class="token punctuation">)</span>			将测试条件和操作符组合起来行程更大的表达式。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//对于文件，我们定义正确权限为0600， 目录则为0711。测试具有“不正确”权限的文件表达式为： </span>
find <span class="token operator">~</span> \<span class="token punctuation">(</span> <span class="token operator">-</span>type f <span class="token operator">-</span>not <span class="token operator">-</span>perm <span class="token number">0600</span> \<span class="token punctuation">)</span> <span class="token operator">-</span>or \<span class="token punctuation">(</span> <span class="token operator">-</span>type d <span class="token operator">-</span>not <span class="token operator">-</span>perm <span class="token number">0700</span> \<span class="token punctuation">)</span><span class="token comment">//表示( file with bad perms ) -or ( directory with bad perms )。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>expr1 <span class="token operator">-</span>operator expr2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在所有情况下，总会执行表达式 expr1；然而由操作符来决定是否执行表达式 expr2。</p> <ul><li><strong>预定义的操作</strong></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>-delete		删除当前匹配的文件
-ls			对匹配单位文件执行等同的<span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> -dils<span class="token variable">`</span></span>命令。并将结果发送到标准输出
-print		把匹配文件的全路径名输送到标准输出。如果没有指定其它操作，这是 默认操作。 
-quit 		一旦找到一个匹配，退出。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//用户家目录（和它的子目录）下搜索每个以.BAK 结尾的文件名。当找到后，就删除它们。</span>
find <span class="token operator">~</span> <span class="token operator">-</span>type f <span class="token operator">-</span>name <span class="token string">'*.BAK'</span> <span class="token operator">-</span><span class="token keyword">delete</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>4、用户自定义行为</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">-</span>exec command <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">;</span><span class="token comment">// command 就是指一个命令的名字，{}是当前路径名的符号表示，分号是要求的界定符表明命令结束。</span>
find <span class="token operator">~</span> <span class="token operator">-</span>type f <span class="token operator">-</span>name <span class="token string">'foo*'</span> <span class="token operator">-</span>ok ls <span class="token operator">-</span>l <span class="token string">'{}'</span> <span class="token string">';'</span> <span class="token comment">//删除搜索到的文件，但是需要按确认键</span>
find <span class="token operator">~</span> <span class="token operator">-</span>type f <span class="token operator">-</span>name <span class="token string">'foo*'</span> <span class="token operator">-</span>exec ls <span class="token operator">-</span>l <span class="token string">'{}'</span> <span class="token string">';'</span> <span class="token comment">//删除搜索到的文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>5、xargs</strong></p> <p>​		 xargs 命令会执行一个有趣的函数。它从标准输入接受输入，并把<strong>输入转换为一个特定命令的参数列表</strong>。从而提高执行效率。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//find 命令的输出被管道到 xargs 命令，反过来，xargs 会为 ls 命令构建参数列表，然后执行 ls 命令。</span>
find <span class="token operator">~</span> <span class="token operator">-</span>type f <span class="token operator">-</span>name <span class="token string">'foo\*'</span> <span class="token operator">-</span>print <span class="token operator">|</span> xargs ls <span class="token operator">-</span>l
<span class="token comment">//找出playground文件夹下所有的名称为'file-A'的文件</span>
find playground <span class="token operator">-</span>type f <span class="token operator">-</span>name <span class="token string">'file-A'</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4、归档和备份"><a href="#_4、归档和备份" class="header-anchor">#</a> 4、归档和备份</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>• <span class="token function">gzip</span> – 压缩或者展开文件
• <span class="token function">bzip2</span> – 块排序文件压缩器
归档程序：
• <span class="token function">tar</span> – 磁带打包工具
• <span class="token function">zip</span> – 打包和压缩文件
还有文件同步程序：
• <span class="token function">rsync</span> – 同步远端文件和目
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>1、压缩文件</strong></p> <p>​		压缩算法（数学技巧被用来执行压缩任务）分为两大类，<strong>无损压缩和有损压缩</strong>。无损压缩保留了 原始文件的所有数据。这意味着，当还原一个压缩文件的时候，还原的文件与原文件一模一样。 而另一方面，有损压缩，执行压缩操作时会删除数据，允许更大的压缩。</p> <ul><li><p>gzip。这个 gzip 程序被用来压缩一个或多个文件。当执行 gzip 命令时，则原始文件的压缩版会替代原始文件。 相对应的 gunzip 程序被用来把压缩文件复原为没有被压缩的版本。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>gzip <span class="token number">1.</span>txt<span class="token comment">// 压缩</span>
gunzip <span class="token number">1.</span>txt<span class="token punctuation">.</span>gz <span class="token comment">//解压，解压时不用写.gz后缀也可以</span>
<span class="token comment">//浏览压缩文件的内容</span>
gunzip <span class="token operator">-</span>c foo<span class="token punctuation">.</span>txt <span class="token operator">|</span> less
<span class="token comment">//浏览压缩文件的内容</span>
zcat foo<span class="token punctuation">.</span>txt<span class="token punctuation">.</span>gz <span class="token operator">|</span> less
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>gzip的选项：</p> <table><thead><tr><th>选项</th> <th>说明</th></tr></thead> <tbody><tr><td>-c</td> <td>把输出写入到标准输出，并且保留原始文件。也有可能用--stdout 和--to-stdout 选项来指定。</td></tr> <tr><td>-d</td> <td>解压缩。正如 gunzip 命令一样。也可以用--decompress 或者--uncompress 选项来指定.</td></tr> <tr><td>-f</td> <td>强制压缩，即使原始文件的压缩文件已经存在了，也要执行。也可以用--force 选 项来指定。</td></tr> <tr><td>-h</td> <td>显示用法信息。也可用--help 选项来指定。</td></tr> <tr><td>-l</td> <td>列出每个被压缩文件的压缩数据。也可用--list 选项。</td></tr> <tr><td>-r</td> <td>若命令的一个或多个参数是目录，则递归地压缩目录中的文件。也可用--recursiv e 选项来指定。</td></tr> <tr><td>-t</td> <td>测试压缩文件的完整性。也可用--test 选项来指定。</td></tr> <tr><td>-v</td> <td>显示压缩过程中的信息。也可用--verbose 选项来指定。</td></tr> <tr><td>-number</td> <td>设置压缩指数。number 是一个在1（最快，最小压缩）到9（最慢，最大压缩）之 间的整数。 数值1和9也可以各自用--fast 和--best 选项来表示。默认值是整数 6。</td></tr></tbody></table></li> <li><p>zip</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>zip options zipfile file<span class="token operator">...</span>
zip <span class="token operator">-</span>r playground<span class="token punctuation">.</span>zip playground  <span class="token comment">//压缩文件</span>
unzip playground<span class="token punctuation">.</span>zip	<span class="token comment">//解压</span>
unzip <span class="token operator">-</span>l playground<span class="token punctuation">.</span>zip playground<span class="token operator">/</span>dir<span class="token operator">-</span><span class="token number">87</span><span class="token operator">/</span>file<span class="token operator">-</span><span class="token constant">Z</span>  <span class="token comment">//选择性的解压文件</span>
ls <span class="token operator">-</span>l <span class="token operator">/</span>etc<span class="token operator">/</span> <span class="token operator">|</span> zip ls<span class="token operator">-</span>etc<span class="token punctuation">.</span>zip <span class="token operator">-</span> <span class="token comment">//最后面的横杠为&quot;标准输入作为输入文件&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <p><strong>2、归档文件</strong></p> <p>​		归档就是收集许多文件，并把它们捆绑成一个大文件的过程。</p> <ul><li><p>tar——tape archive的简称。到扩展名为 .tar 或者 .tgz 的文件，它们各自表示“普通” 的 tar 包和被 gzip 程序压缩过的 tar包。一个 tar 包可以由一组独立的文件，一个或者多个目录，或者 两者混合体组成。<strong>必须先指定模式，然后再指定选项。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>tar mode<span class="token punctuation">[</span>options<span class="token punctuation">]</span> pathname<span class="token operator">...</span> <span class="token comment">//mode表示操作模式</span>
tar cf playground<span class="token punctuation">.</span>tar playground <span class="token comment">//将playground目录创建为playground.tar包 c是模式，f是选项</span>
tar xf <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>playground<span class="token punctuation">.</span>tar   <span class="token comment">//将归档文件抽取出来</span>
tar xf archive<span class="token punctuation">.</span>tar pathname<span class="token operator">...</span> <span class="token comment">//通过指定路径名来抽取指定的文件</span>
find playground <span class="token operator">-</span>name <span class="token string">'file-A'</span> <span class="token operator">-</span>exec tar rf playground<span class="token punctuation">.</span>tar <span class="token string">'{}'</span> <span class="token string">'+'</span><span class="token comment">//们使用 find 命令来匹配 playground 目录中所有名为 file-A 的文件，然后使用-exec 行为，来 唤醒带有追加模式（r）的 tar 命令，把匹配的文件添加到归档文件 playground.tar 里面。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>tar有以下<strong>操作模式</strong></p> <table><thead><tr><th>模式</th> <th>说明</th></tr></thead> <tbody><tr><td>c</td> <td>为文件和／或目录列表创建归档文件。</td></tr> <tr><td>x</td> <td>抽取归档文件。</td></tr> <tr><td>r</td> <td>追加具体的路径到归档文件的末尾。</td></tr> <tr><td>t</td> <td>列出归档文件的内容。</td></tr></tbody></table> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">tar</span> xzf diction.tar.gz //抽取<span class="token punctuation">(</span>-z<span class="token punctuation">)</span>gzip压缩过的文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="_5、文本处理"><a href="#_5、文本处理" class="header-anchor">#</a> 5、文本处理</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>• sort – 给文本行排序
• uniq – 报告或者省略重复行
• cut – 从每行中删除文本区域
• paste – 合并文件文本行
• join – 基于某个共享字段来联合两个文件的文本行
• comm – 逐行比较两个有序的文件
• diff – 逐行比较文件
• patch – 给原始文件打补丁
• tr – 翻译或删除字符
• sed – 用于筛选和转换文本的流编辑器
• aspell – 交互式拼写检查器
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>1、sort</strong></p> <p>​		sort 程序对标准输入的内容，或命令行中指定的一个或多个文件进行排序，然后把排序 结果发送到标准输出。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>sort foo<span class="token punctuation">.</span>txt<span class="token comment">// 对foo.txt的文件内容进行排序</span>
sort file1<span class="token punctuation">.</span>txt file2<span class="token punctuation">.</span>txt file3<span class="token punctuation">.</span>txt <span class="token operator">&gt;</span> final_sorted_list<span class="token punctuation">.</span>txt <span class="token comment">//将文件排序并输入到另一个文件中</span>
ls <span class="token operator">-</span>l <span class="token operator">/</span>usr<span class="token operator">/</span>bin <span class="token operator">|</span> sort <span class="token operator">-</span>nr <span class="token operator">-</span>k <span class="token number">5</span> <span class="token operator">|</span> head <span class="token comment">//忽略 ls 程序能按照文件大小对输出结果进行排序</span>
sort <span class="token operator">-</span>t <span class="token string">':'</span> <span class="token operator">-</span>k <span class="token number">7</span> <span class="token operator">/</span>etc<span class="token operator">/</span>passwd <span class="token operator">|</span> head  <span class="token comment">//按':'为分隔符，按照第7个字段进行排序</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>sort 程序有几个有趣的选项。</p> <table><thead><tr><th>选项</th> <th>长选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-b</td> <td>--ignore-leading-bla nks</td> <td>默认情况下，对整行进行排序，从每行的第一个字符开始。这个选项 导致 sort 程序忽略 每行开头的空格，从第一个非空白字符开始排 序。</td></tr> <tr><td>-f</td> <td>--ignore-case</td> <td>让排序不区分大小写。</td></tr> <tr><td>-n</td> <td>--numeric-sort</td> <td>基于字符串的长度来排序。使用此选项允许根据数字值执行排序，而 不是字母值。</td></tr> <tr><td>-r</td> <td>--reverse</td> <td>按相反顺序排序。结果按照降序排列，而不是升序。</td></tr> <tr><td>-k</td> <td>--key=field1[,field2]</td> <td>对从 field1到 field2之间的字符排序，而不是整个文本行。看下面的 讨论。</td></tr> <tr><td>-m</td> <td>--merge</td> <td>把每个参数看作是一个预先排好序的文件。把多个文件合并成一个排 好序的文件，而没有执行额外的排序。</td></tr> <tr><td>-o</td> <td>--output=file</td> <td>把排好序的输出结果发送到文件，而不是标准输出。</td></tr> <tr><td>-t</td> <td>--field-separator=ch ar</td> <td>定义域分隔字符。默认情况下，域由空格或制表符分隔。</td></tr></tbody></table> <p><strong>2、切片和切块</strong></p> <ul><li><strong>cut</strong></li></ul> <p>​		 cut 程序被用来从文本行中抽取文本，并把其输出到标准输出。它能够接受多个文件参数或者标准输入。</p> <p>​		cut程序主要有以下选项：</p> <table><thead><tr><th>选项</th> <th>说明</th></tr></thead> <tbody><tr><td>-c char_list</td> <td>从文本行中抽取由 char_list 定义的文本。这个列表可能由一个或多个逗号分隔开的数值区间组成。</td></tr> <tr><td>-f field_list</td> <td>从文本行中抽取一个或多个由 field_list 定义的字段。这个列表可能包括一个或多个字段，或由逗号分隔开的字段区间。</td></tr> <tr><td>-d delim_char</td> <td>当指定-f 选项之后，使用 delim_char 做为字段分隔符。默认情况下， 字段之间必 须由单个 tab 字符分隔开。</td></tr> <tr><td>--complement</td> <td>抽取整个文本行，除了那些由-c 和／或-f 选项指定的文本。</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//将distros.txt每行，按tab键分割，然后取分割后每行的第3个数据</span>
cut <span class="token operator">-</span>f <span class="token number">3</span> distros<span class="token punctuation">.</span>txt  
<span class="token comment">//从第3个数据中，抽取7-10位置的字符</span>
cut <span class="token operator">-</span>f <span class="token number">3</span> distros<span class="token punctuation">.</span>txt <span class="token operator">|</span> cut <span class="token operator">-</span>c <span class="token number">7</span><span class="token operator">-</span><span class="token number">10</span> 
<span class="token comment">//指定冒号做为字段分隔符。并只取前1个数据</span>
cut <span class="token operator">-</span>d <span class="token string">':'</span> <span class="token operator">-</span>f <span class="token number">1</span> <span class="token operator">/</span>etc<span class="token operator">/</span>passwd <span class="token operator">|</span> head 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p><strong>paste</strong></p> <p>​		paste 命令的功能正好与 cut 相反。它会添加一个或多个文本列到文件中，而不是从文件中抽取文本列。 它通过读取多个文件，然后把每个文件中的字段整合成单个文本流，输入到标准出。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//将distros-versions.txt文件中对应行的数据distros-dates.txt对应行的后面</span>
paste distros<span class="token operator">-</span>dates<span class="token punctuation">.</span>txt distros<span class="token operator">-</span>versions<span class="token punctuation">.</span>txt 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><strong>join</strong></p> <p>​		把来自于多个基于共享 关键域的文件的数据结合起来。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>join distros<span class="token operator">-</span>key<span class="token operator">-</span>names<span class="token punctuation">.</span>txt distros<span class="token operator">-</span>key<span class="token operator">-</span>vernums<span class="token punctuation">.</span>txt 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p><strong>3、比较文本</strong></p> <ul><li><p><strong>comm</strong></p> <p>comm 程序会比较两个文本文件，并且会显示每个文件特有的文本行和共有的文把行。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>comm <span class="token number">1.</span>txt <span class="token number">2.</span>txt <span class="token comment">//比较1.txt和2.txt的差异 ，会显示三列数据，1列共有的，2列各自独有的</span>
comm <span class="token operator">-</span><span class="token number">12</span> file1<span class="token punctuation">.</span>txt file2<span class="token punctuation">.</span>txt <span class="token comment">//只显示共有列，隐藏独有列</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><strong>diff</strong></p> <p>diff 程序被用来监测文件之间的差异。最流行的两种格式是上下文模式和统一模式。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//上下文模式</span>
diff <span class="token operator">-</span>c file1<span class="token punctuation">.</span>txt file2<span class="token punctuation">.</span>txt
<span class="token comment">//统一模式</span>
diff <span class="token operator">-</span>u file1<span class="token punctuation">.</span>txt file2<span class="token punctuation">.</span>txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><strong>patch</strong></p> <p>​		这个 patch 程序被用来把更改应用到文本文件中。它接受从 diff 程序的输出，并且通常被用来 把较老的文件版本转变为较新的文件版本。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//创建diff文件</span>
diff <span class="token operator">-</span>u <span class="token number">1.</span>txt <span class="token number">2.</span>txt <span class="token operator">&gt;</span> patch<span class="token punctuation">.</span>txt
<span class="token comment">//把旧文件修补成新文件。</span>
patch patch<span class="token punctuation">.</span>txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <p><strong>4、运行时编辑</strong></p> <ul><li><p>tr</p> <p>tr 程序被用来更改字符。我们可以把它看作是一种基于字符的查找和替换操作。 换字是一种把字符从一个字母转换为另一个字母的过程。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//将小写转换成大写</span>
echo <span class="token string">&quot;lowercase letters&quot;</span> <span class="token operator">|</span> tr a<span class="token operator">-</span>z <span class="token constant">A</span><span class="token operator">-</span><span class="token constant">Z</span> 
<span class="token comment">//将小写字母转换成大写A</span>
echo <span class="token string">&quot;lowercase letters&quot;</span> <span class="token operator">|</span> tr <span class="token punctuation">[</span><span class="token operator">:</span>lower<span class="token operator">:</span><span class="token punctuation">]</span> <span class="token constant">A</span> 
<span class="token comment">//删除相邻重复的字符</span>
echo <span class="token string">&quot;aaabbbccc&quot;</span> <span class="token operator">|</span> tr <span class="token operator">-</span>s ab 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>sed</p> <p>​		名字 sed 是 <code>stream editor</code>（<strong>流编辑器</strong>）的简称。它对文本流进行编辑，要不是一系列指定的文件， 要不就是标准输入。</p> <p>​		sed的命令开始与单个字符。替换命令由字母s来代表，后面跟着查找和替换字符串，分隔符的选择是随意的，一般用斜杆字符。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;front&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&quot;s/front/back/&quot;</span> //用back替换front类似于替换查找操作
<span class="token builtin class-name">echo</span> <span class="token string">&quot;front&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'2s/front/back/'</span> //给命令添加地址2，对输入流的第2行进行替换操作
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>地址有很多方式来表达，下面是常用的sed地址表示法：</p> <table><thead><tr><th>地址</th> <th>说明</th></tr></thead> <tbody><tr><td>n</td> <td>行号，n 是一个正整数。</td></tr> <tr><td>$</td> <td>最后一行。</td></tr> <tr><td>/regexp/</td> <td>所有匹配一个 POSIX 基本正则表达式的文本行。注意正则表达式通过 斜杠字符界 定。选择性地，这个正则表达式可能由一个备用字符界定，通过\cregexpc 来 指定 表达式，这里 c 就是一个备用的字符。</td></tr> <tr><td>addr1,addr2</td> <td>从 addr1 到 addr2 范围内的文本行，包含地址 addr2 在内。地址可能是上述任意 单独的地址形式。</td></tr> <tr><td>first~step</td> <td>匹配由数字 first 代表的文本行，然后随后的每个在 step 间隔处的文本行。例如 1~2 是指每个位于偶数行号的文本行，5~5 则指第五行和之后每五行位置的文本 行。</td></tr> <tr><td>addr1,+n</td> <td>匹配地址 addr1 和随后的 n 个文本行。</td></tr> <tr><td>addr!</td> <td>匹配所有的文本行，除了 addr 之外，addr 可能是上述任意的地址形式。</td></tr></tbody></table> <p>sed的基本编辑命令如下所示：</p> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>=</td> <td>输出当前的行号。</td></tr> <tr><td>a</td> <td><strong>在当前行之后追加文本。</strong></td></tr> <tr><td>d</td> <td>删除当前行。</td></tr> <tr><td>i</td> <td><strong>在当前行之前插入文本。</strong></td></tr> <tr><td>p</td> <td>打印当前行。默认情况下，sed 程序打印每一行，并且只是编辑文件中匹配 指定地 址的文本行。通过指定-n 选项，这个默认的行为能够被忽略。</td></tr> <tr><td>q</td> <td>退出 sed，不再处理更多的文本行。如果不指定-n 选项，输出当前行。</td></tr> <tr><td>Q</td> <td>退出 sed，不再处理更多的文本行。</td></tr> <tr><td>s/regexp/replacement/</td> <td>只要找到一个 regexp 匹配项，就替换为 replacement 的内容。 replacement 可 能包括特殊字符 &amp;，其等价于由 regexp 匹配的文本。另外， replacement 可能 包含序列 \1到 \9，其是 regexp 中相对应的子表达式的内容。在 replacement 末尾的斜杠之后，可以指定一个 可选的标志，来修改 s 命令的行为。</td></tr> <tr><td>y/set1/set2</td> <td>执行字符转写操作，通过把 set1 中的字符转变为相对应的 set2 中的字符。 注意不 同于 tr 程序，sed 要求两个字符集合具有相同的长度。</td></tr></tbody></table> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;2019/12/30&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&quot;s/\//-/g&quot;</span> //将<span class="token string">&quot;/&quot;</span>替换为<span class="token string">&quot;-&quot;</span>
<span class="token function">cat</span> test.txt <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&quot;s/\//-/g&quot;</span> <span class="token operator">&gt;</span> replace.txt //将test.txt文件中的所有<span class="token string">&quot;/&quot;</span>都替换为<span class="token string">&quot;-&quot;</span>，并输出到replace.txt中
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用<code>-f</code>选项，格式化文件。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>//使用distros.sed来格式化distros.txt中的代码
<span class="token function">sed</span> -f distros.sed distros.txt 
//替换修改foo.txt文件中的相关字符串
<span class="token function">sed</span> -i <span class="token string">'s/lazy/laxy/; s/jumped/jimped/'</span> foo.txt

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>aspell</p> <p>​		一款交互式的拼写检查器。它能够智能地检查各种类型的文本文件， 包括 HTML 文件，C/C++ 程序，电子邮件和其它种类的专业文本。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>aspell check textfile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：一旦结束aspell操作，再用aspell检查不会再有任何效果了。除非你又修改了该文件。</p></li></ul> <h3 id="_6、格式化输出"><a href="#_6、格式化输出" class="header-anchor">#</a> 6、格式化输出</h3> <p><strong>1、nl</strong></p> <p>​		像cat一样，nl能够接受多个文件作为命令行参数，也能标准输出。 nl有一些常用的选项，相当于<code>cat -n</code>。</p> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-b style</td> <td>把 body 按被要求方式数行，可以是以下方式：<br>a = 数所有行<br>t = 数非空行。这是默认设置。<br>n = 无<br>pregexp = 只数那些匹配了正则表达式的行</td></tr> <tr><td>-f style</td> <td>将 footer 按被要求设置数。默认是无</td></tr> <tr><td>-h style</td> <td>将 header 按被要求设置数。默认是无</td></tr> <tr><td>-i number</td> <td>将页面增加量设置为数字。默认是1。</td></tr> <tr><td>-n format</td> <td>设置数数的格式，格式可以是：<br>ln = 左偏，没有前导零。<br>rn = 右偏，没有前导零。<br>rz = 右偏，有前导零。</td></tr> <tr><td>-p</td> <td>不要在每一个逻辑页面的开始重设页面数。</td></tr> <tr><td>-s string</td> <td>在每一个行的末尾加字符作分割符号。默认是单个的 tab。</td></tr> <tr><td>-v number</td> <td>将每一个逻辑页面的第一行设置成数字。默认是1。</td></tr> <tr><td>-w width</td> <td>将行数的宽度设置，默认是6。</td></tr></tbody></table> <p><strong>2、fold</strong></p> <p>​		像其他命令，fold 接受一个或多个文件及标准输入。显示文件行宽。跟<code>nl</code>的选项一样。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>//限制行宽为12个字符，-s表示会考虑单词边界，按单词为单位。不会拆分单词。
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The quick brown fox jumped over the lazy dog.&quot;</span> <span class="token operator">|</span> <span class="token function">fold</span> -w <span class="token number">12</span> -s  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_7、编译程序"><a href="#_7、编译程序" class="header-anchor">#</a> 7、编译程序</h3> <p><strong>1、什么是编译？</strong></p> <p>​		编译就是把源码（一个由程序员编写的人类可读的程序描述）翻译成计算机处理器的母语的过程。但是<code>shell</code>脚本不需要编译，它是<strong>脚本或解释型语言</strong>。脚本语言由一个叫做解释器的特殊程序执行。<strong>解释型程序执行起来要比编译程序慢很多</strong>。这是因为每次解释型程序执行时，程序中每一条源码指令都需要翻译， 而一个编译程序，一条源码指令只翻译一次，翻译后的指令会永久地记录到最终的执行文件中。<strong>开发解释型程序 要比编译程序快速且容易。</strong></p> <p><strong>2、获取源码</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ftp</span> ftp.gnu.org 
<span class="token builtin class-name">cd</span> gnu/diction 
get diction-1.11.tar.gz 
bye 
<span class="token function">tar</span> xzf dict-1.111.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>2、解读源码</strong></p> <p><strong>构建程序</strong></p> <p>大多数程序通过一个简单的，两个命令的序列构建：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>./configure 
<span class="token function">make</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>configure</code>程序是shell脚本，它的工作是为了分析程序建立环境。<strong><code>configue</code>是为了检查是否安装了必要的外部工具和组件。</strong><code>./</code>表示当前工作目录。运行会会创建一些文件如<code>Makefile</code>。</p> <p><code>make</code>程序会把<code>makefile</code>作为输入，<code>makefile</code>描述了包括最终完成的程序的各组件之间的关系和依赖性。<code>make</code> 只是构建 需要构建的部分，而不是简单地重新构建所有的内容。</p> <p><strong>安装程序</strong></p> <p>​		打包良好的源码经常包括一个特别的 make 目标文件，叫做 install。这个目标文件将在系统目录中安装最终的产品，以供使用。 通常，这个目录是 /usr/local/bin，为在本地所构建软件的传统安装位置。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">make</span> <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/articles/linux/linux命令行总结1.html" class="prev">linux命令行总结1</a></span> <span class="next"><a href="/articles/linux/linux命令行总结3.html">linux命令行总结3</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c1d9b9ee.js" defer></script><script src="/assets/js/2.c7d58fa6.js" defer></script><script src="/assets/js/19.3d0a85ef.js" defer></script>
  </body>
</html>
