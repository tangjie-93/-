---
title: vm.$watch的实现原理
date: '2020-06-09'
type: 技术
tags: vue
note: vm.$watch的实现原理
---
`vm.$watch` 的底层原理实际上是创建了一个 `watcher`,对某个属性进行专门的观测。
在组件中 定义 `watch` 属性时，在组件实例化过程中会经历如下几个步骤。
```js
initWatch(vm, opts.watch)——>createWatcher(vm,expOrFn,handler,options)创建观察者——>vm.$watch(expOrFn, handler, options)——new Watcher(vm, expOrFn, cb, options)//创建观察者实例
```
而直接在组件中调用调用 `this.$watch(obj,handler,options)` 少了前面两步初始化 `watch` 和创建 `watcher` 观察者。